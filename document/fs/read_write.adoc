= read_write.c

== 功能描述

该文件实现了文件操作系统调用 read()、write()和 lseek()。read()和 write()将根据不同的文件类型，分别调用前面4个文件中实现的相应读写函数。因此本文件是前面4个文件中函数的上层接口实现。lseek()用于设置文件读写指针。

read()系统调用首先判断所给参数的有效性，然后根据文件的 i 节点信息判断文件的类型。若是管道 文件则调用程序 pipe.c 中的读函数;若是字符设备文件，则调用 char_dev.c 中的 rw_char()字符读函数; 如果是块设备文件，则执行 block_dev.c 程序中的块设备读操作，并返回读取的字节数;如果是目录文件或一般正规文件，则调用 file_dev.c 中的文件读函数 file_read()。write()系统调用的实现与 read()类似。

lseek()系统调用将对文件句柄对应文件结构中的当前读写指针进行修改。对于读写指针不能移动的文件和管道文件，将给出错误号，并立即返回。